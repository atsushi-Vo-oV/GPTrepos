# 量子時空将棋 (Quantum Spacetime Shogi) プロトタイプ

Rust + `eframe/egui` で実装したローカル2人対戦用プロトタイプです。

## 起動

```bash
cargo run
```

## 実装ポイント

- 9x9盤、持ち駒、成り、候補集合（歩/香/桂/銀/金/飛/角/王）
- 世界線 (`w`) と履歴時刻 (`t`) を保持
- すべての世界線に対し1手ずつ入力して「同時確定」
- `Δw` による分岐（世界線新規生成、衝突時は不合法）
- `Δt<0` の時間逆行（プロトタイプでは分岐生成）
- 捕獲時に捕獲駒から王候補を除外
- 2歩、段制限（歩/香/桂打ち）を候補集合の厳格フィルタで実装
- 枚数制約による候補収縮（王1/飛1/角1/金2/銀2/桂2/香2/歩9）

## GUI

- 左: 世界線一覧（`w`, `t`, 王候補確定有無, 入力済み）
- 中央: 盤面表示
- 下部: 選択世界線の手入力
  - 通常移動: `from`, `to`, `成り`, `Δw`, `Δt`
  - 打ち: `hand_idx`, `to`, `Δw`, `Δt`
- 「同時確定」で全世界線を同時適用

## 注意（プロトタイプ制限）

- 4D移動の自然拡張は簡略実装です（x/y/w/t への代表的埋め込み）。
- 王手判定と詰み判定は完全実装ではなく、最小限の王候補管理を提供します。
- 滑走駒の経路衝突は主に盤面2Dに対する基礎チェックです。
